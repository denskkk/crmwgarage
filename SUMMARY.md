# ‚úÖ –í–°–Å –ì–û–¢–û–í–û: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è CRM —Å–∏—Å—Ç–µ–º–∞ W-Garage –Ω–∞ Supabase

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL + RLS)
‚úÖ **SQL-—Å—Ö–µ–º–∞**: `supabase-setup.sql`
- –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å (organizations, memberships)
- –†–æ–ª–∏: owner/admin/manager/inspector/sales/support/employee/viewer
- –¢–∞–±–ª–∏—Ü—ã CRM: companies, contacts, deals, activities, pipelines, stages, tags, files
- Audit logs –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- Row Level Security (RLS) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞
- Helper-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚úÖ **–°–∫—Ä–∏–ø—Ç**: `scripts/migrate-users.ts`
- –°–æ–∑–¥–∞—ë—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é "W-Garage"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –≤—Å–µ—Ö 33 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ Supabase Auth
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö —Ä–µ–∞–ª—å–Ω—ã–µ email/–ø–∞—Ä–æ–ª–∏ –∏–∑ LocalStorage
- –ù–∞–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–æ–ª–∏ (admin ‚Üí owner, inspector, employee)
- –°–æ–∑–¥–∞—ë—Ç default pipeline –ø—Ä–æ–¥–∞–∂ —Å 6 —Å—Ç–∞–¥–∏—è–º–∏

**–ó–∞–ø—É—Å–∫**: `npm run migrate`

### 3. Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚úÖ **Supabase –∫–ª–∏–µ–Ω—Ç**: `src/supabaseClient.ts`
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
- Helper-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Auth
- TypeScript —Ç–∏–ø—ã –¥–ª—è env

‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `src/components/LoginForm.tsx` ‚Äî –≥–æ—Ç–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
- `src/App.supabase-example.tsx` ‚Äî –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Auth

‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
- `.env.example` ‚Äî —à–∞–±–ª–æ–Ω –¥–ª—è credentials
- `src/vite-env.d.ts` ‚Äî TypeScript —Ç–∏–ø—ã –¥–ª—è env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üìñ **–ì–ª–∞–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**:
- `MIGRATION_GUIDE.md` ‚Äî **–ì–õ–ê–í–ù–ê–Ø**: –ø–æ–ª–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π
- `QUICK_START.md` ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –±–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- `COMMANDS.md` ‚Äî —à–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥

üìñ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
- `docs/SUPABASE_SETUP.md` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase
- `docs/supabase-cheatsheet.md` ‚Äî –ø—Ä–∏–º–µ—Ä—ã CRUD –∑–∞–ø—Ä–æ—Å–æ–≤
- `docs/crm-schema.md` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î

üìñ **–°—Ç–∞—Ä—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** (LocalStorage):
- `RESET_DATABASE.md` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö 33 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `README.md` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω —Å –ª–∏–Ω–∫–∞–º–∏ –Ω–∞ –Ω–æ–≤—ã–µ –≥–∞–π–¥—ã

### 5. NPM —Å–∫—Ä–∏–ø—Ç—ã

```json
{
  "dev": "vite",                    // –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞
  "build": "tsc && vite build",     // –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞
  "preview": "vite preview",        // –ü—Ä–µ–≤—å—é –±–∏–ª–¥–∞
  "migrate": "tsx scripts/migrate-users.ts"  // –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
}
```

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç Supabase
1. https://supabase.com ‚Üí New Project
2. Settings ‚Üí API ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ URL, anon key, service_role key

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ credentials
```powershell
Copy-Item .env.example .env.local
notepad .env.local
```
–í—Å—Ç–∞–≤—å—Ç–µ credentials –∏–∑ Supabase.

### –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ SQL
1. Supabase ‚Üí SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å `supabase-setup.sql`
3. Run

### –®–∞–≥ 4: –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```powershell
npm install
npm run migrate
```
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ Organization ID –∏–∑ –≤—ã–≤–æ–¥–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env.local`:
```
VITE_ORGANIZATION_ID=<org-id>
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏—Ç–µ
```powershell
npm run dev
```

–ì–æ—Ç–æ–≤–æ! –í—Å–µ 33 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏ —Å–æ —Å–≤–æ–∏–º–∏ email/–ø–∞—Ä–æ–ª—è–º–∏.

---

## –õ–æ–≥–∏–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–ª–∞–¥–µ–ª—å—Ü—ã (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø):
- **admin@wgarage.com** / admin123
- **dandali.v@gmail.com** / Boss2024
- **viktoria.turuta@gmail.com** / Boss2024

### –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä—ã (—á—Ç–µ–Ω–∏–µ + –∫–æ–Ω—Ç—Ä–æ–ª—å):
- **7355797@gmail.com** / Inspector2024 (–ü—É—Å—Ç–æ–≤–æ–π –Ü–≥–æ—Ä)
- **juliamolodaya@ukr.net** / Inspector2024 (–ú–æ–ª–æ–¥–∞ –Æ–ª—ñ—è)
- **gvv1510@gmail.com** / Inspector2024 (–ì–∞–ª—è–Ω—Ç –í–æ–ª–æ–¥–∏–º–∏—Ä)
- **schukinvova@ukr.net** / Inspector2024 (–©—É–∫—ñ–Ω –í–æ–ª–æ–¥–∏–º–∏—Ä)
- **ig.vir555@gmail.com** / Inspector2024 (–í—ñ—Ä—á–µ–Ω–∫–æ –Ü–≥–æ—Ä)

### –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏:
- **konstantinborcenko@gmail.com** / Emp2024_001
- ... (–µ—â—ë 24, –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤ `RESET_DATABASE.md`)

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ CRM

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- **Companies**: –∫–æ–º–ø–∞–Ω–∏–∏ —Å –∞–¥—Ä–µ—Å–∞–º–∏, –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- **Contacts**: —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –ª–∏—Ü–∞, –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–º–ø–∞–Ω–∏—è–º
- **Custom fields**: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π/–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

### –ü—Ä–æ–¥–∞–∂–∏
- **Deals**: —Å–¥–µ–ª–∫–∏ —Å —Å—É–º–º–∞–º–∏, —Å—Ç–∞–¥–∏—è–º–∏
- **Pipelines**: –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ—Ä–æ–Ω–æ–∫ –ø—Ä–æ–¥–∞–∂
- **Stages**: –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∞–¥–∏–∏ —Å–¥–µ–ª–æ–∫
- **Owner**: –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ —Å–¥–µ–ª–∫—É

### –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **Tasks**: –∑–∞–¥–∞—á–∏ —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏
- **Calls/Meetings**: –∑–≤–æ–Ω–∫–∏ –∏ –≤—Å—Ç—Ä–µ—á–∏
- **Emails/Notes**: –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –∏ –∑–∞–º–µ—Ç–∫–∏
- **Assignee**: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Tags**: –º–µ—Ç–∫–∏ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π/–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤/—Å–¥–µ–ª–æ–∫
- **Files**: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ Supabase Storage
- **Audit logs**: –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Row Level Security**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º
- **–†–æ–ª–∏**: –≥–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ (8 —Ä–æ–ª–µ–π)
- **Auth**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Supabase (email/password, OAuth)

---

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏–∏
```ts
const { data } = await supabase
  .from('companies')
  .select('*')
  .eq('organization_id', orgId);
```

### –î–æ–±–∞–≤–∏—Ç—å —Å–¥–µ–ª–∫—É
```ts
await supabase.from('deals').insert({
  organization_id: orgId,
  title: '–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞',
  company_id: companyId,
  pipeline_id: pipelineId,
  stage_id: stageId,
  amount: 10000,
  owner_id: userId
});
```

–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤: `docs/supabase-cheatsheet.md`

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ

### –ö–æ—Ä–æ—Ç–∫–∏–π –ø–ª–∞–Ω (MVP):
1. ‚úÖ –ë–∞–∑–∞ –≥–æ—Ç–æ–≤–∞
2. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
   - –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–∞–Ω–∏–π (table + create)
   - –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
   - Kanban –¥–æ—Å–∫–∞ –¥–ª—è deals
   - –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
4. ‚è≥ Dashboard —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –ø–ª–∞–Ω:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å email (Gmail API)
- –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (CSV, Excel)
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (React Native)
- Webhooks –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (—Ç—Ä–∏–≥–≥–µ—Ä—ã, workflows)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
crmwgarage/
‚îú‚îÄ‚îÄ üìÑ MIGRATION_GUIDE.md          ‚≠ê –ì–õ–ê–í–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø
‚îú‚îÄ‚îÄ üìÑ COMMANDS.md                 –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ üìÑ QUICK_START.md              –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ üìÑ supabase-setup.sql          SQL —Å—Ö–µ–º–∞
‚îú‚îÄ‚îÄ üìÅ src/
‚îÇ   ‚îú‚îÄ‚îÄ supabaseClient.ts          Supabase –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ components/LoginForm.tsx   –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ App.supabase-example.tsx   –ü—Ä–∏–º–µ—Ä Auth
‚îú‚îÄ‚îÄ üìÅ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ migrate-users.ts           –ú–∏–≥—Ä–∞—Ü–∏—è 33 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ üìÅ docs/
‚îÇ   ‚îú‚îÄ‚îÄ SUPABASE_SETUP.md          –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ supabase-cheatsheet.md     –ü—Ä–∏–º–µ—Ä—ã CRUD
‚îÇ   ‚îî‚îÄ‚îÄ crm-schema.md              –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã
‚îî‚îÄ‚îÄ üìÑ .env.local                  Credentials (–Ω–µ –≤ Git!)
```

---

## Support

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
- Supabase: https://supabase.com/docs
- React: https://react.dev
- TypeScript: https://typescriptlang.org

**–ü—Ä–æ–±–ª–µ–º—ã?**
- –°–º. "Troubleshooting" –≤ `MIGRATION_GUIDE.md`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ logs –≤ Supabase Dashboard
- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ RLS –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (—Ç–æ–ª—å–∫–æ dev!)

---

## üéâ –ò—Ç–æ–≥

–£ –≤–∞—Å —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è CRM —Å –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å—é
- ‚úÖ 33 —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞—Ä–æ–ª—è–º–∏
- ‚úÖ –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ RLS
- ‚úÖ –ì–æ—Ç–æ–≤–∞—è –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –æ—Ç–∫—Ä–æ–π—Ç–µ `MIGRATION_GUIDE.md` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é! üöÄ
